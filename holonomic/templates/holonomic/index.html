{% extends "holonomic/base.html" %}

{% load static %}

{% block content %}
<div class="row">
    <div class="col-6">
        <h3>Control</h3>
        <div class="position-relative">
            <div id="static"></div>
        </div>
    </div>
    <div class="col-6 row">
        <h3>Command</h3>

        <button class="btn btn-outline-primary">
            Go forward 10 meters
        </button>

        <button class="btn btn-outline-primary">
            Make a 1 meter square
        </button>
        <button class="btn btn-outline-danger">
            Stop
        </button>
    </div>
</div>
<script>
    var static = window.nipplejs.create({
        zone: document.getElementById('static'),
        mode: 'static',
        position: { top: '100px', left: '100px' },
        color: 'blue',
        size: 200,
    });

    static.on('move', async (event, pos) => {
        const resp = await fetch('arbitraryMove', {
            method: 'POST',
            body: JSON.stringify({
                angle: pos.angle.degree,
                speed: pos.distance,
            })
        })
        console.log(await resp.json())
    })
</script>
{% endblock %}